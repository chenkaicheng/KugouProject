<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kugou.dao.SongDao">
	<sql id="allsong">
		select
		SongID,SongName,SongSinger,SongImg,SongWords,SongURL,AreaID
	</sql>
	<resultMap type="Song" id="SongResultMap">
		<result column="SongID" property="SongID" />
		<result column="SongName" property="SongName" />
		<result column="SongSinger" property="SongSinger" />
		<result column="SongImg" property="SongImg" />
		<result column="SongWords" property="SongWords" />
		<result column="SongURL" property="SongURL" />
	</resultMap>
	<!-- 查询音乐盛典 -->
	<select id="selectAllSongRadio" resultMap="SongResultMap">
		<include refid="allsong" />
		from song where AreaID=11
	</select>

	<!-- 查询热榜Top10 -->
	<select id="selectAllSongHeat" resultMap="SongResultMap">
		<include refid="allsong" />
		from song where AreaID=9
	</select>

	<!-- 查询最新歌曲 -->
	<select id="selectAllSong" resultMap="SongResultMap">
		<include refid="allsong" />
		from song where AreaID=10
	</select>

	<!-- 查询原创和美女 -->
	<select id="selectAllSongOriginal" resultMap="SongResultMap">
		<include refid="allsong" />
		from song where AreaID=12
	</select>

	<!-- 查询MV热播 -->
	<select id="selectAllSongMV" resultMap="SongResultMap">
		<include refid="allsong" />
		from song where AreaID=14
	</select>

	<!-- 搜索查询 -->
	<select id="selectAllSongInfo" resultMap="SongResultMap"
		parameterType="java.lang.String">
		<include refid="allsong" />
		from Song
		<where>
			<if test="SongName!=null and SongName!='' ">
				SongName like CONCAT('%',#{SongName
				,jdbcType=VARCHAR},'%' )
			</if>
		</where>
	</select>

	<!-- 表记录总行数 -->
	<select id="iTotalRecords" resultType="java.lang.Integer">
  	select count(SongID) from song
  </select>
  
  <!-- 表搜索记录总行数 -->
   <select id="iTotalDisplayRecords" resultType="java.lang.Integer">
  	select count(s.SongID) from song s
  	<if test="sSearch != '' " >
  		<bind name="s_Search" value="sSearch"/>
  		where
  		CONCAT(s.SongID,s.SongName) like CONCAT('%','${s_Search}','%')
    </if>
  </select>
  
  <!-- datatables分页查询 -->
  <select id="selectForSearch" resultMap="SongResultMap">
  	select s.SongID ,s.SongName from song s
  	<if test="sSearch != '' " >
  		<bind name="s_Search" value="sSearch"/>
  		where
        CONCAT(s.SongID,s.SongName) like CONCAT('%','${s_Search}','%')
    </if>
    <if test="asc != null ">
    	order by ${asc} asc
    </if>
    <if test="desc != null ">
    	order by ${desc} desc
    </if>
   <if test="iDisplayStart != null" >
  		limit #{iDisplayStart,jdbcType=INTEGER},#{pageDisplayLength,jdbcType=INTEGER}
    </if>
  </select>
  
</mapper>